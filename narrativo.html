<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de GestiÃ³n de Proyectos</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1400px; margin: 0 auto; background: rgba(255, 255, 255, 0.95);
            border-radius: 20px; padding: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .header { text-align: center; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 3px solid #667eea; }
        .header h1 { color: #333; font-size: 2.5em; margin-bottom: 10px; }
        .nav-tabs { display: flex; gap: 10px; margin-bottom: 30px; flex-wrap: wrap; }
        .tab-button {
            padding: 12px 24px; border: none; background: #f0f0f0; border-radius: 25px;
            cursor: pointer; font-weight: 600; transition: all 0.3s ease; color: #666;
        }
        .tab-button.active {
            background: linear-gradient(135deg, #667eea, #764ba2); color: white;
            transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .form-section {
            background: white; padding: 25px; border-radius: 15px; margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08); border-left: 5px solid #667eea;
        }
        .form-section h3 { margin-bottom: 20px; font-size: 1.4em; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #555; }
        .form-group input, .form-group select {
            width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 10px;
        }
        .btn { padding: 12px 24px; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; margin: 5px; }
        .btn-primary { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
        .btn-success { background: linear-gradient(135deg, #4CAF50, #45a049); color: white; }
        .btn-danger { background: linear-gradient(135deg, #f44336, #d32f2f); color: white; }
        .data-table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; border-radius: 10px; overflow: hidden; }
        .data-table th { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 15px; text-align: left; }
        .data-table td { padding: 12px 15px; border-bottom: 1px solid #f0f0f0; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 15px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.08); border-top: 4px solid #667eea; }
        .stat-card h4 { color: #667eea; font-size: 2em; margin-bottom: 10px; }
        .progress-bar { width: 100%; height: 20px; background: #e0e0e0; border-radius: 10px; overflow: hidden; margin: 10px 0; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #4CAF50, #45a049); transition: width 0.3s ease; }
        .alert { padding: 15px; margin: 20px 0; border-radius: 10px; font-weight: 500; }
        .alert-success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .alert-info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸš€ Sistema de GestiÃ³n de Proyectos</h1>
            <p>Gestiona personas, proyectos, actividades y tareas con seguimiento mensual</p>
        </div>

        <div class="nav-tabs">
            <button class="tab-button active" onclick="showTab('personas')">ðŸ‘¥ Personas</button>
            <button class="tab-button" onclick="showTab('proyectos')">ðŸ“Š Proyectos</button>
            <button class="tab-button" onclick="showTab('actividades')">ðŸ“‹ Actividades</button>
            <button class="tab-button" onclick="showTab('tareas')">âœ… Tareas</button>
            <button class="tab-button" onclick="showTab('registro')">ðŸ“ˆ Registro Mensual</button>
            <button class="tab-button" onclick="showTab('dashboard')">ðŸ“Š Dashboard</button>
        </div>

        <!-- Personas -->
        <div id="personas" class="tab-content active">
            <div class="form-section">
                <h3>Registrar Nueva Persona</h3>
                <div class="form-grid">
                    <div class="form-group"><label>Nombre Completo:</label><input type="text" id="nombrePersona"></div>
                    <div class="form-group"><label>Cargo:</label><input type="text" id="cargoPersona"></div>
                    <div class="form-group"><label>Email:</label><input type="email" id="emailPersona"></div>
                </div>
                <button class="btn btn-primary" onclick="agregarPersona()">Agregar Persona</button>
            </div>
            <div class="form-section">
                <h3>Lista de Personas</h3>
                <table class="data-table" id="tablaPersonas"><thead><tr><th>Nombre</th><th>Cargo</th><th>Email</th><th>Proyectos</th><th>Acciones</th></tr></thead><tbody></tbody></table>
            </div>
        </div>

        <!-- Proyectos -->
        <div id="proyectos" class="tab-content">
            <div class="form-section">
                <h3>Registrar Nuevo Proyecto</h3>
                <div class="form-grid">
                    <div class="form-group"><label>Nombre:</label><input type="text" id="nombreProyecto"></div>
                    <div class="form-group"><label>Responsable:</label><select id="personaResponsable"></select></div>
                    <div class="form-group"><label>DescripciÃ³n:</label><input type="text" id="descripcionProyecto"></div>
                </div>
                <button class="btn btn-primary" onclick="agregarProyecto()">Agregar Proyecto</button>
            </div>
            <div class="form-section">
                <h3>Lista de Proyectos</h3>
                <table class="data-table" id="tablaProyectos"><thead><tr><th>Proyecto</th><th>Responsable</th><th>DescripciÃ³n</th><th>Actividades</th><th>Acciones</th></tr></thead><tbody></tbody></table>
            </div>
        </div>

        <!-- Actividades -->
        <div id="actividades" class="tab-content">
            <div class="form-section">
                <h3>Registrar Nueva Actividad</h3>
                <div class="form-grid">
                    <div class="form-group"><label>Nombre:</label><input type="text" id="nombreActividad"></div>
                    <div class="form-group"><label>Proyecto:</label><select id="proyectoActividad"></select></div>
                    <div class="form-group"><label>Meta Mensual:</label><input type="number" id="metaMensual"></div>
                    <div class="form-group"><label>Meta Anual:</label><input type="number" id="metaAnual"></div>
                </div>
                <button class="btn btn-primary" onclick="agregarActividad()">Agregar Actividad</button>
            </div>
            <div class="form-section">
                <h3>Lista de Actividades</h3>
                <table class="data-table" id="tablaActividades"><thead><tr><th>Actividad</th><th>Proyecto</th><th>Meta Mensual</th><th>Meta Anual</th><th>Tareas</th><th>Acciones</th></tr></thead><tbody></tbody></table>
            </div>
        </div>

        <!-- Tareas -->
        <div id="tareas" class="tab-content">
            <div class="form-section">
                <h3>Registrar Nueva Tarea</h3>
                <div class="form-grid">
                    <div class="form-group"><label>Nombre:</label><input type="text" id="nombreTarea"></div>
                    <div class="form-group"><label>Actividad:</label><select id="actividadTarea"></select></div>
                    <div class="form-group"><label>DescripciÃ³n:</label><input type="text" id="descripcionTarea"></div>
                </div>
                <button class="btn btn-primary" onclick="agregarTarea()">Agregar Tarea</button>
            </div>
            <div class="form-section">
                <h3>Lista de Tareas</h3>
                <table class="data-table" id="tablaTareas"><thead><tr><th>Tarea</th><th>Actividad</th><th>Proyecto</th><th>DescripciÃ³n</th><th>Acciones</th></tr></thead><tbody></tbody></table>
            </div>
        </div>

        <!-- Registro Mensual -->
        <div id="registro" class="tab-content">
            <div class="form-section">
                <h3>Registro de Cumplimiento Mensual</h3>
                <div class="form-grid">
                    <div class="form-group"><label>Persona:</label><select id="personaRegistro" onchange="cargarTareasPersona()"></select></div>
                    <div class="form-group"><label>Mes:</label><select id="mesRegistro"><option value="1">Enero</option><option value="2">Febrero</option><option value="3">Marzo</option><option value="4">Abril</option><option value="5">Mayo</option><option value="6">Junio</option><option value="7">Julio</option><option value="8">Agosto</option><option value="9">Septiembre</option><option value="10">Octubre</option><option value="11">Noviembre</option><option value="12">Diciembre</option></select></div>
                    <div class="form-group"><label>AÃ±o:</label><input type="number" id="anoRegistro" value="2024"></div>
                </div>
                <div id="tareasRegistro"></div>
                <button class="btn btn-success" onclick="guardarRegistroMensual()">Guardar Registro</button>
            </div>
            <div class="form-section"><h3>Registros Guardados</h3><div id="registrosGuardados"></div></div>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="tab-content">
            <div class="stats-grid">
                <div class="stat-card"><h4 id="totalPersonas">0</h4><p>Total Personas</p></div>
                <div class="stat-card"><h4 id="totalProyectos">0</h4><p>Total Proyectos</p></div>
                <div class="stat-card"><h4 id="totalActividades">0</h4><p>Total Actividades</p></div>
                <div class="stat-card"><h4 id="totalTareas">0</h4><p>Total Tareas</p></div>
            </div>
            <div class="form-section"><h3>Resumen por Persona</h3><div id="resumenPersonas"></div></div>
            <div class="form-section"><h3>ComparaciÃ³n Metas vs Logros</h3><div id="resumenMetas"></div></div>
        </div>

        <div id="mensajes"></div>
    </div>

<script>
let personas = [], proyectos = [], actividades = [], tareas = [], registrosMensuales = [];

// NavegaciÃ³n
function showTab(tabName) {
    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
    document.getElementById(tabName).classList.add('active');
    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    if (tabName === 'dashboard') { actualizarDashboard(); actualizarResumenMetas(); }
}

// Personas
function agregarPersona() {
    const nombre = nombrePersona.value, cargo = cargoPersona.value, email = emailPersona.value;
    if (!nombre || !cargo || !email) return mostrarMensaje('Complete todos los campos','error');
    personas.push({id:Date.now(), nombre,cargo,email, proyectos:[]});
    limpiarPersona(); actualizarTablaPersonas(); actualizarSelectPersonas();
    mostrarMensaje('Persona agregada','success');
}
function limpiarPersona(){ nombrePersona.value=''; cargoPersona.value=''; emailPersona.value=''; }
function actualizarTablaPersonas() {
    const tbody = tablaPersonas.querySelector('tbody'); tbody.innerHTML='';
    personas.forEach(p=>{
        const proyectosPersona=proyectos.filter(pr=>pr.personaId===p.id);
        tbody.innerHTML+=`<tr><td>${p.nombre}</td><td>${p.cargo}</td><td>${p.email}</td><td>${proyectosPersona.length}/3</td><td><button class="btn btn-danger" onclick="eliminarPersona(${p.id})">Eliminar</button></td></tr>`;
    });
}
function eliminarPersona(id){ personas=personas.filter(p=>p.id!==id); proyectos=proyectos.filter(pr=>pr.personaId!==id); actualizarTablaPersonas(); actualizarSelectPersonas(); mostrarMensaje('Persona eliminada','success'); }
function actualizarSelectPersonas() {
    [personaResponsable, personaRegistro].forEach(sel=>{
        sel.innerHTML='<option value="">Seleccionar persona...</option>';
        personas.forEach(p=>sel.innerHTML+=`<option value="${p.id}">${p.nombre}</option>`);
    });
}

// Proyectos
function agregarProyecto() {
    const nombre=nombreProyecto.value, personaId=parseInt(personaResponsable.value), descripcion=descripcionProyecto.value;
    if(!nombre||!personaId||!descripcion) return mostrarMensaje('Complete todos los campos','error');
    if(proyectos.filter(p=>p.personaId===personaId).length>=3) return mostrarMensaje('MÃ¡x 3 proyectos por persona','error');
    proyectos.push({id:Date.now(), nombre, personaId, descripcion, actividades:[]});
    limpiarProyecto(); actualizarTablaProyectos(); actualizarSelectProyectos(); actualizarTablaPersonas();
    mostrarMensaje('Proyecto agregado','success');
}
function limpiarProyecto(){ nombreProyecto.value=''; personaResponsable.value=''; descripcionProyecto.value=''; }
function actualizarTablaProyectos(){
    const tbody=tablaProyectos.querySelector('tbody'); tbody.innerHTML='';
    proyectos.forEach(pr=>{
        const persona=personas.find(p=>p.id===pr.personaId), acts=actividades.filter(a=>a.proyectoId===pr.id);
        tbody.innerHTML+=`<tr><td>${pr.nombre}</td><td>${persona?persona.nombre:'Sin asignar'}</td><td>${pr.descripcion}</td><td>${acts.length}/3</td><td><button class="btn btn-danger" onclick="eliminarProyecto(${pr.id})">Eliminar</button></td></tr>`;
    });
}
function eliminarProyecto(id){ proyectos=proyectos.filter(p=>p.id!==id); actividades=actividades.filter(a=>a.proyectoId!==id); actualizarTablaProyectos(); actualizarSelectProyectos(); mostrarMensaje('Proyecto eliminado','success'); }
function actualizarSelectProyectos(){ proyectoActividad.innerHTML='<option value="">Seleccionar proyecto...</option>'; proyectos.forEach(pr=>proyectoActividad.innerHTML+=`<option value="${pr.id}">${pr.nombre}</option>`); }

// Actividades
function agregarActividad(){
    const nombre=nombreActividad.value, proyectoId=parseInt(proyectoActividad.value), metaMensual=parseInt(metaMensual.value), metaAnual=parseInt(metaAnual.value);
    if(!nombre||!proyectoId||!metaMensual||!metaAnual) return mostrarMensaje('Complete todos los campos','error');
    if(actividades.filter(a=>a.proyectoId===proyectoId).length>=3) return mostrarMensaje('MÃ¡x 3 actividades por proyecto','error');
    actividades.push({id:Date.now(), nombre, proyectoId, metaMensual, metaAnual, tareas:[]});
    limpiarActividad(); actualizarTablaActividades(); actualizarSelectActividades(); actualizarTablaProyectos();
    mostrarMensaje('Actividad agregada','success');
}
function limpiarActividad(){ nombreActividad.value=''; proyectoActividad.value=''; metaMensual.value='
